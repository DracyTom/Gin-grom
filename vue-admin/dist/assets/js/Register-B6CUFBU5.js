/* empty css             *//* empty css                 *//* empty css                *//* empty css                  *//* empty css               *//* empty css                  *//* empty css                  */import{u as E,r as g,a as x,c as k,b as n,d as r,w as a,e as P,E as F,f as R,o as U,g as q,h as C,l as B,m as h,i as I,j as f,k as L}from"./index-DRFz7__u.js";import{v as N}from"./index-D5zCzsRw.js";import{_ as S}from"./_plugin-vue_export-helper-DlAUqK2U.js";const z={class:"register-container"},K={class:"register-form"},$={class:"register-footer"},j={__name:"Register",setup(D){const _=R(),c=E(),d=g(),u=g(!1),o=x({username:"",email:"",password:"",confirmPassword:"",role:"user"}),w={username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:50,message:"用户名长度在 3 到 50 个字符",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{validator:(t,e,l)=>{N(e)?l():l(new Error("请输入正确的邮箱格式"))},trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度不能少于 6 个字符",trigger:"blur"}],confirmPassword:[{required:!0,message:"请确认密码",trigger:"blur"},{validator:(t,e,l)=>{e!==o.password?l(new Error("两次输入的密码不一致")):l()},trigger:"blur"}],role:[{required:!0,message:"请选择角色",trigger:"change"}]},m=async()=>{if(d.value)try{await d.value.validate(),u.value=!0;const{confirmPassword:t,...e}=o;await c.register(e),_.push("/login")}catch(t){console.error("注册失败:",t)}finally{u.value=!1}};return(t,e)=>{const l=C,i=q,p=h,v=B,V=I,b=L,y=F;return U(),k("div",z,[n("div",K,[e[9]||(e[9]=n("div",{class:"register-header"},[n("h2",null,"用户注册"),n("p",null,"创建您的账号")],-1)),r(y,{ref_key:"registerFormRef",ref:d,model:o,rules:w,size:"large",onKeyup:P(m,["enter"])},{default:a(()=>[r(i,{prop:"username"},{default:a(()=>[r(l,{modelValue:o.username,"onUpdate:modelValue":e[0]||(e[0]=s=>o.username=s),placeholder:"请输入用户名","prefix-icon":"User",clearable:""},null,8,["modelValue"])]),_:1}),r(i,{prop:"email"},{default:a(()=>[r(l,{modelValue:o.email,"onUpdate:modelValue":e[1]||(e[1]=s=>o.email=s),placeholder:"请输入邮箱","prefix-icon":"Message",clearable:""},null,8,["modelValue"])]),_:1}),r(i,{prop:"password"},{default:a(()=>[r(l,{modelValue:o.password,"onUpdate:modelValue":e[2]||(e[2]=s=>o.password=s),type:"password",placeholder:"请输入密码","prefix-icon":"Lock","show-password":"",clearable:""},null,8,["modelValue"])]),_:1}),r(i,{prop:"confirmPassword"},{default:a(()=>[r(l,{modelValue:o.confirmPassword,"onUpdate:modelValue":e[3]||(e[3]=s=>o.confirmPassword=s),type:"password",placeholder:"请确认密码","prefix-icon":"Lock","show-password":"",clearable:""},null,8,["modelValue"])]),_:1}),r(i,{prop:"role"},{default:a(()=>[r(v,{modelValue:o.role,"onUpdate:modelValue":e[4]||(e[4]=s=>o.role=s),placeholder:"请选择角色",style:{width:"100%"}},{default:a(()=>[r(p,{label:"普通用户",value:"user"}),r(p,{label:"管理员",value:"admin"})]),_:1},8,["modelValue"])]),_:1}),r(i,null,{default:a(()=>[r(V,{type:"primary",size:"large",style:{width:"100%"},loading:u.value,onClick:m},{default:a(()=>e[6]||(e[6]=[f(" 注册 ")])),_:1,__:[6]},8,["loading"])]),_:1}),n("div",$,[e[8]||(e[8]=n("span",null,"已有账号？",-1)),r(b,{type:"primary",onClick:e[5]||(e[5]=s=>t.$router.push("/login"))},{default:a(()=>e[7]||(e[7]=[f(" 立即登录 ")])),_:1,__:[7]})])]),_:1},8,["model"])])])}}},ee=S(j,[["__scopeId","data-v-e136115d"]]);export{ee as default};
